p8105_hw2_lg3450
================
Luyun Ge

# Problem1

first, clean the data in pols-month.csv

``` r
library(tidyverse)
```

``` r
pols_month_df = 
  # import the data
  read_csv("../fivethirtyeight_datasets/pols-month.csv") |>
  # break up MON into YEAR, MONTH, DAY
  separate(
    mon, into = c("year", "month", "day"), sep = "-") |>
  # replace month number with month name
  mutate(
    month = case_match(
      month, 
      "01" ~ "Jan",
      "02" ~ "Feb",
      "03" ~ "Mar",
      "04" ~ "Apr",
      "05" ~ "May",
      "06" ~ "Jun",
      "07" ~ "Jul",
      "08" ~ "Aug",
      "09" ~ "Sep",
      "10" ~ "Oct",
      "11" ~ "Nov", 
      "12" ~ "Dec"
    )) |>
  # create a president variable taking values gop and dem
  mutate(president = case_when(
    prez_gop == 1 ~ "gop",
    prez_dem == 1 ~ "dem"
  )) |>
  # remove prez_dem, prez_gop, day
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
View(pols_month_df)
```

second, clean the data in snp.csv

``` r
library(lubridate)
```

``` r
# import the data
snp_df = 
  read_csv("../fivethirtyeight_datasets/snp.csv") |>
  # first convert date format into same format yyyy-mm-dd 
  mutate(
    date = coalesce(ymd(date), mdy(date)),
    # correction of years
    date = if_else(
      year(date) > 2025, 
      date - years(100), 
      date)) |>
  # separate year, month and day
  separate(date, into = c("year", "month", "day"), sep = "-") |>
  # replace month number with month name
  mutate(
    month = case_match(
      month, 
      "01" ~ "Jan",
      "02" ~ "Feb",
      "03" ~ "Mar",
      "04" ~ "Apr",
      "05" ~ "May",
      "06" ~ "Jun",
      "07" ~ "Jul",
      "08" ~ "Aug",
      "09" ~ "Sep",
      "10" ~ "Oct",
      "11" ~ "Nov", 
      "12" ~ "Dec"
    )) |>
  # remove the day variable
  select(-day) |>
  # prioritize year and month
  relocate(year, month)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

    ## Warning: There were 2 warnings in `mutate()`.
    ## The first warning was:
    ## ℹ In argument: `date = coalesce(ymd(date), mdy(date))`.
    ## Caused by warning:
    ## !  612 failed to parse.
    ## ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.

``` r
View(snp_df)
```

third, tidy the unemployment data

``` r
# import the unemployment data
unemployment_df = 
  read_csv("../fivethirtyeight_datasets/unemployment.csv") |>
  # switch from "wide" to "long" format
  pivot_longer(
    cols = Jan:Dec,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  # rename column name
  rename(year = Year)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
View(unemployment_df)
```

Now join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
pols_snp_df = 
  left_join(pols_month_df, snp_df, by = c("year", "month")) |>
  mutate(year = as.integer(year))
result_df = 
  left_join(pols_snp_df, unemployment_df, by = c("year", "month"))

View(pols_snp_df)
View(result_df)
```

\#!!!Write a short paragraph about these datasets. Explain briefly what
each dataset contained, and describe the resulting dataset (e.g. give
the dimension, range of years, and names of key variables).

# Problem2

Read and clean the Mr. Trash Wheel sheet: first download the required
library

``` r
library(readxl)
```

then import the data from excel file

``` r
trash_df = 
  # specify the sheet, omit non-data entries
  read_excel("../202509 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N710") |>
  # clean variable names
  janitor::clean_names() |>
  # omit rows that do not include dumpster-specific data
  drop_na(dumpster) |>
  # round and convert # of sports balls to nearest integer
  mutate(sports_balls = as.integer(round(sports_balls)))
View(trash_df)
```

Use a similar process to import, clean, and organize the data for
Professor Trash Wheel and Gwynnda, and combine this with the Mr. Trash
Wheel dataset to produce a single tidy dataset. To keep track of which
Trash Wheel is which, you may need to add an additional variable to both
datasets before combining.

second clean the `Professor Trash Wheel` dataset

``` r
prof_df = 
  # specify the sheet, omit non-data entries
  read_excel("../202509 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) |>
  # clean variable names
  janitor::clean_names() |>
  # omit rows that do not include dumpster-specific data
  drop_na(dumpster)
  
View(prof_df)
```

third clean the `Gwynnda` dataset

combine 3 datasets
